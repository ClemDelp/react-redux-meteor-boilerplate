{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/mongo/local_collection_driver.js","filenameRelative":"/packages/mongo/local_collection_driver.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/mongo/local_collection_driver.js.map","sourceFileName":"/packages/mongo/local_collection_driver.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"local_collection_driver"},"ignored":false,"code":"LocalCollectionDriver = function LocalCollectionDriver() {\n  var self = this;\n  self.noConnCollections = {};\n};\n\nvar ensureCollection = function ensureCollection(name, collections) {\n  if (!(name in collections)) collections[name] = new LocalCollection(name);\n  return collections[name];\n};\n\n_.extend(LocalCollectionDriver.prototype, {\n  open: function () {\n    function open(name, conn) {\n      var self = this;\n      if (!name) return new LocalCollection();\n      if (!conn) {\n        return ensureCollection(name, self.noConnCollections);\n      }\n      if (!conn._mongo_livedata_collections) conn._mongo_livedata_collections = {};\n      // XXX is there a way to keep track of a connection's collections without\n      // dangling it off the connection object?\n      return ensureCollection(name, conn._mongo_livedata_collections);\n    }\n\n    return open;\n  }()\n});\n\n// singleton\nLocalCollectionDriver = new LocalCollectionDriver();","ast":null,"map":{"version":3,"sources":["/packages/mongo/local_collection_driver.js"],"names":[],"mappings":"AAAA,wBAAwB,iCAAY;AAClC,MAAI,OAAO,IAAX;AACA,OAAK,iBAAL,GAAyB,EAAzB;AACD,CAHD;;AAKA,IAAI,mBAAmB,SAAnB,gBAAmB,CAAU,IAAV,EAAgB,WAAhB,EAA6B;AAClD,MAAI,EAAE,QAAQ,WAAV,CAAJ,EACE,YAAY,IAAZ,IAAoB,IAAI,eAAJ,CAAoB,IAApB,CAApB;AACF,SAAO,YAAY,IAAZ,CAAP;AACD,CAJD;;AAMA,EAAE,MAAF,CAAS,sBAAsB,SAA/B,EAA0C;AACxC;AAAM,kBAAU,IAAV,EAAgB,IAAhB,EAAsB;AAC1B,UAAI,OAAO,IAAX;AACA,UAAI,CAAC,IAAL,EACE,OAAO,IAAI,eAAJ,EAAP;AACF,UAAI,CAAE,IAAN,EAAY;AACV,eAAO,iBAAiB,IAAjB,EAAuB,KAAK,iBAA5B,CAAP;AACD;AACD,UAAI,CAAE,KAAK,2BAAX,EACE,KAAK,2BAAL,GAAmC,EAAnC;;;AAGF,aAAO,iBAAiB,IAAjB,EAAuB,KAAK,2BAA5B,CAAP;AACD;;AAZD;AAAA;AADwC,CAA1C;;;AAiBA,wBAAwB,IAAI,qBAAJ,EAAxB","file":"/packages/mongo/local_collection_driver.js.map","sourcesContent":["LocalCollectionDriver = function () {\n  var self = this;\n  self.noConnCollections = {};\n};\n\nvar ensureCollection = function (name, collections) {\n  if (!(name in collections))\n    collections[name] = new LocalCollection(name);\n  return collections[name];\n};\n\n_.extend(LocalCollectionDriver.prototype, {\n  open: function (name, conn) {\n    var self = this;\n    if (!name)\n      return new LocalCollection;\n    if (! conn) {\n      return ensureCollection(name, self.noConnCollections);\n    }\n    if (! conn._mongo_livedata_collections)\n      conn._mongo_livedata_collections = {};\n    // XXX is there a way to keep track of a connection's collections without\n    // dangling it off the connection object?\n    return ensureCollection(name, conn._mongo_livedata_collections);\n  }\n});\n\n// singleton\nLocalCollectionDriver = new LocalCollectionDriver;\n"]},"hash":"566d30d20e81b4519eeb524eb6bd82fd44b5be92"}
